const CONFIG={BASE_URL:"https://raw.githubusercontent.com/elitemassagemx/Home/main/IMG/",API_URL:"https://raw.githubusercontent.com/elitemassagemx/Home/main/data.json",WHATSAPP_NUMBER:"5215640020305"},CAROUSEL_IMAGE_BASE_URL="https://raw.githubusercontent.com/elitemassagemx/prueba/main/carruimg/",App={state:{services:{},currentCategory:"masajes",initialized:!1},init:async function(){try{const e=await fetch(CONFIG.API_URL);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();this.state.services=t.services,this.renderServices(),this.setupEventListeners(),this.state.initialized=!0,this.loadCarouselContent(),this.setupGallery(),this.setupGalleryAnimations(),this.setupGalleryModal(),this.setupFilters(),this.setupServiceCategories(),this.setupPackageNav()}catch(e){console.error("Error initializing app:",e)}},buildImageUrl:function(e){return e?e.startsWith("http")?e:`${CONFIG.BASE_URL}${e.startsWith("/")?e.slice(1):e}`:`${CONFIG.BASE_URL}default-icon.webp`},handleImageError:function(e){console.warn(`Failed to load image: ${e.src}`),e.src=`${CONFIG.BASE_URL}default-icon.webp`,e.onerror=null},renderServices:function(){const e=document.getElementById("services-grid");if(!e)return;e.innerHTML="";const t=this.state.services[this.state.currentCategory];if(!Array.isArray(t))return void(e.innerHTML="<p>No se encontraron servicios disponibles</p>");const n=document.createDocumentFragment();t.forEach(e=>{const t=this.createServiceElement(e);n.appendChild(t)}),e.appendChild(n),this.renderBenefitsNav(t)},createServiceElement:function(e){const t=document.querySelector("#service-template");if(!t)return document.createElement("div");const n=t.content.cloneNode(!0),i=n.querySelector(".service-icon");i&&(i.src=this.buildImageUrl(e.icon),i.alt=e.title||"Service icon",i.onerror=()=>this.handleImageError(i));const r=n.querySelector(".service-title");r&&(r.textContent=e.title||"");const s=n.querySelector(".service-description");s&&(s.textContent=e.description||"");const o=n.querySelector(".service-benefits");if(o&&Array.isArray(e.benefitsIcons)){e.benefitsIcons.forEach((t,n)=>{const i=document.createElement("div");i.className="benefit-item";const r=document.createElement("img");r.src=this.buildImageUrl(t),r.alt=e.benefits[n]||"",r.className="benefit-icon",r.onerror=()=>this.handleImageError(r);const s=document.createElement("span");s.textContent=e.benefits[n]||"",i.appendChild(r),i.appendChild(s),o.appendChild(i)})}const a=n.querySelector(".service-duration");return a&&(a.textContent=e.duration||""),n.querySelector(".saber-mas-button").addEventListener("click",()=>this.showPopup(e)),Array.isArray(e.benefits)&&e.benefits.forEach(e=>{n.querySelector(".service-item").classList.add(e.toLowerCase().replace(/\s+/g,"-"))}),n},setupServiceCategories:function(){document.querySelectorAll('.service-category-toggle input[type="radio"]').forEach(e=>{e.addEventListener("change",()=>{this.state.currentCategory=e.value,this.renderServices()})})},setupBenefitsNav:function(e){const t=document.querySelector(".benefits-nav");if(!t)return;const n=new Set,i=new Map;e.forEach(e=>{e.benefits?.forEach((t,n)=>{i.set(t,e.benefitsIcons[n])}),e.benefits?.forEach(e=>n.add(e))}),t.innerHTML=`<button class="benefit-btn active" data-filter="all"><img src="${this.buildImageUrl("todos.webp")}" alt="Todos"><span class="visible-text">Todos</span><span class="hidden-text visually-hidden">all</span></button>${Array.from(n).map(e=>{const t=i.get(e)||`${e.toLowerCase().replace(/\s+/g,"-")}.webp`,n=this.getAlternativeText(e);return`<button class="benefit-btn" data-filter="${e.toLowerCase().replace(/\s+/g,"-")}"><img src="${this.buildImageUrl(t)}" alt="${e}"><span class="visible-text">${n}</span><span class="hidden-text visually-hidden">${e}</span></button>`}).join("")}`,this.setupFilterButtons()},getAlternativeText:function(e){return{"Bajará tu Estrés":"Relax","Cambiará tu Ánimo":"Ánimo","Aliviarás Tensiones":"Alivio","Aliviarás Dolores Musculares":"Músculos","Mejorarás tu Circulación":"Circula","Relajación Profunda":"Profundo",Relajación:"Relax","Alivio de Dolores en Espalda y Cuello":"Espalda","Relajación Total":"Total","Mejora Circulación Sanguínea":"Sangre","Hidratará tu Piel":"Hidrata",Multisensorial:"Sentidos","Mejorarás tu Equilibrio":"Balance","Reducirás el Estrés":"Anti-estrés","Aumento de Energía":"Energía","Alivio Dolor Muscular":"No dolor","Reduce Ansiedad":"Calma","Calma Profunda":"Sereno"}[e]||e},showPopup:function(e){const t=document.getElementById("popup");if(!t)return;const n=t.querySelector(".popup-content"),i=t.querySelector("#popup-title"),r=t.querySelector("#popup-image"),s=t.querySelector("#popup-description"),o=t.querySelector(".popup-benefits"),a=t.querySelector(".popup-includes"),c=t.querySelector("#popup-duration");if(!n||!i||!r||!s||!o||!a||!c)return;i.textContent=e.title||"",r.src=this.buildImageUrl(e.popupImage||e.image),r.alt=e.title||"",r.onerror=()=>this.handleImageError(r),s.textContent=e.popupDescription||e.description||"",o.innerHTML="",a.innerHTML="",Array.isArray(e.benefits)&&Array.isArray(e.benefitsIcons)&&e.benefits.forEach((t,n)=>{const i=document.createElement("div");i.classList.add("popup-benefit-item");const r=document.createElement("img");r.src=this.buildImageUrl(e.benefitsIcons[n]),r.alt=t,r.onerror=()=>this.handleImageError(r);const s=document.createElement("span");s.textContent=t,i.appendChild(r),i.appendChild(s),o.appendChild(i)}),Array.isArray(e.includes)&&e.includes.forEach(e=>{const t=document.createElement("div");t.classList.add("popup-include-item");const n=document.createElement("img");n.src=this.buildImageUrl("check-icon.webp"),n.alt="Incluido",n.onerror=()=>this.handleImageError(n);const i=document.createElement("span");i.textContent=e,t.appendChild(n),t.appendChild(i),a.appendChild(t)}),c.textContent=e.duration||"",t.style.display="block"},setupFilterButtons:function(){document.querySelectorAll(".benefit-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.filter;document.querySelectorAll(".service-item").forEach(e=>{const n="all"===t||Array.from(e.querySelectorAll(".benefit-item span")).some(e=>e.textContent.toLowerCase().replace(/\s+/g,"-")===t);e.style.display=n?"block":"none"}),document.querySelectorAll(".benefit-btn").forEach(e=>e.classList.remove("active")),e.classList.add("active")})})},setupPackageNav:function(){const e=document.querySelector(".package-nav");if(!e)return;const t=new Set,n=this.state.services.paquetes;n&&n.forEach(e=>{t.add(e.type||e.title)}),e.innerHTML=`<button class="package-btn active" data-filter="all"><img src="${this.buildImageUrl("todos.webp")}" alt="Todos"><span class="visible-text">Todos</span><span class="hidden-text visually-hidden">all</span></button>${Array.from(t).map(e=>{const t=this.getAlternativeText(e);return`<button class="package-btn" data-filter="${e.toLowerCase().replace(/\s+/g,"-")}"><img src="${this.buildImageUrl(e.toLowerCase().replace(/\s+/g,"-")+"-icon.webp")}" alt="${e}"><span class="visible-text">${t}</span><span class="hidden-text visually-hidden">${e}</span></button>`}).join("")}`}};document.addEventListener("DOMContentLoaded",()=>App.init());
